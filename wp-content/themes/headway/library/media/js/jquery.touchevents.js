(function(e,g){e.each("touchstart touchmove touchend orientationchange tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(j,h){e.fn[h]=function(i){return i?this.bind(h,i):this.trigger(h)};e.attrFn[h]=true});var d=("ontouchstart" in window),c="touchmove scroll",a=d?"touchstart":"mousedown",f=d?"touchend":"mouseup",b=d?"touchmove":"mousemove";e.event.special.scrollstart={enabled:true,setup:function(){var h=this,k=e(h),j,l;function i(n,o){j=o;var m=n.type;n.type=j?"scrollstart":"scrollstop";e.event.handle.call(h,n);n.type=m}k.bind(c,function(m){if(!e.event.special.scrollstart.enabled){return}if(!j){i(m,true)}clearTimeout(l);l=setTimeout(function(){i(m,false)},50)})}};e.event.special.tap={setup:function(){var h=this,i=e(h);i.bind(a,function(j){if(j.which&&j.which!==1||i.data("prevEvent")&&i.data("prevEvent")!==j.type){return false}i.data("prevEvent",j.type);setTimeout(function(){i.removeData("prevEvent")},800);var p=false,n=true,o=j.target,q=j.originalEvent,r=j.type=="touchstart"?[q.touches[0].pageX,q.touches[0].pageY]:[j.pageX,j.pageY],l,k;function m(t){if(t.type=="scroll"){p=true;return}var s=t.type=="touchmove"?t.originalEvent.touches[0]:t;if((Math.abs(r[0]-s.pageX)>10)||(Math.abs(r[1]-s.pageY)>10)){p=true}}k=setTimeout(function(){if(n&&!p){l=j.type;j.type="taphold";e.event.handle.call(h,j);j.type=l}},750);e(window).one("scroll",m);i.bind(b,m).one(f,function(s){i.unbind(b,m);e(window).unbind("scroll",m);clearTimeout(k);n=false;if(!p&&(o==s.target)){l=s.type;s.type="tap";e.event.handle.call(h,s);s.type=l}})})}};e.event.special.swipe={setup:function(){var h=this,i=e(h);i.bind(a,function(k){var m=k.originalEvent.touches?k.originalEvent.touches[0]:k,n={time:(new Date).getTime(),coords:[m.pageX,m.pageY],origin:e(k.target)},j;function l(o){if(!n){return}var p=o.originalEvent.touches?o.originalEvent.touches[0]:o;j={time:(new Date).getTime(),coords:[p.pageX,p.pageY]};if(Math.abs(n.coords[0]-j.coords[0])>10){o.preventDefault()}}i.bind(b,l).one(f,function(o){i.unbind(b,l);if(n&&j){if(j.time-n.time<1000&&Math.abs(n.coords[0]-j.coords[0])>30&&Math.abs(n.coords[1]-j.coords[1])<75){n.origin.trigger("swipe").trigger(n.coords[0]>j.coords[0]?"swipeleft":"swiperight")}}n=j=g})})}};(function(l){var m=l(window),h,k,j;l.event.special.orientationchange=h={setup:function(){if(l.support.orientation){return false}j=k();m.bind("resize",i)},teardown:function(){if(l.support.orientation){return false}m.unbind("resize",i)},add:function(n){var o=n.handler;n.handler=function(p){p.orientation=k();return o.apply(this,arguments)}}};function i(){var n=k();if(n!==j){j=n;m.trigger("orientationchange")}}h.orientation=k=function(){var n=document.documentElement;return n&&n.clientWidth/n.clientHeight<1.1?"portrait":"landscape"}})(jQuery);e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(i,h){e.event.special[i]={setup:function(){e(this).bind(h,e.noop)}}})})(jQuery);